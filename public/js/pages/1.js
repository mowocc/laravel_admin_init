webpackJsonp([1],{"3+cZ":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.$t("system.user.dialog.update"),width:"460px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){return e.$emit("update:visible",!1)}}},[a("div",{staticClass:"pr-5"},[a("el-form",{attrs:{model:e.dataCache,"label-width":"85px"}},[e.isSuperAdmin?a("el-form-item",{attrs:{label:e.$t("system.user.roles")}},[a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.dataCache.is_super_admin,callback:function(t){e.$set(e.dataCache,"is_super_admin",t)},expression:"dataCache.is_super_admin"}},[a("el-tag",{attrs:{effect:"plain",size:"mini",type:"danger"}},[e._v("Super-Admin")])],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:e.$t("system.user.name"),error:Boolean(e.msg.errors.name)?e.msg.errors.name[0]:"",required:""}},[a("el-input",{model:{value:e.dataCache.name,callback:function(t){e.$set(e.dataCache,"name",t)},expression:"dataCache.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("system.user.email"),error:(Boolean(e.msg.errors.email)?e.msg.errors.email[0]:"")||(44202==e.msg.code?e.msg.message:""),required:""}},[a("el-input",{model:{value:e.dataCache.email,callback:function(t){e.$set(e.dataCache,"email",t)},expression:"dataCache.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("system.user.dialog.password"),error:Boolean(e.msg.errors.password)?e.msg.errors.password[0]:""}},[a("el-input",{attrs:{placeholder:e.$t("system.user.dialog.passwordPlaceholder.update")},model:{value:e.dataCache.password,callback:function(t){e.$set(e.dataCache,"password",t)},expression:"dataCache.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("action.save")))]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))])],1)],1)],1)])},staticRenderFns:[]}},"8ZSz":function(e,t,a){var s=a("VU/8")(a("gybs"),a("a6i1"),!1,function(e){a("htZS")},"data-v-065c9af0",null);e.exports=s.exports},"8lj0":function(e,t,a){var s=a("zGNM");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("4d944d6c",s,!0,{})},"99n5":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.$t("system.user.dialog.create"),width:"460px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){return e.$emit("update:visible",!1)}}},[a("div",{staticClass:"pr-5"},[a("el-form",{attrs:{model:e.dataCache,"label-width":"85px"}},[e.isSuperAdmin?a("el-form-item",{attrs:{label:e.$t("system.user.roles")}},[a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.dataCache.is_super_admin,callback:function(t){e.$set(e.dataCache,"is_super_admin",t)},expression:"dataCache.is_super_admin"}},[a("el-tag",{attrs:{effect:"plain",size:"mini",type:"danger"}},[e._v("Super-Admin")])],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:e.$t("system.user.name"),error:Boolean(e.msg.errors.name)?e.msg.errors.name[0]:"",required:""}},[a("el-input",{model:{value:e.dataCache.name,callback:function(t){e.$set(e.dataCache,"name",t)},expression:"dataCache.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("system.user.email"),error:(Boolean(e.msg.errors.email)?e.msg.errors.email[0]:"")||(44202==e.msg.code?e.msg.message:""),required:""}},[a("el-input",{model:{value:e.dataCache.email,callback:function(t){e.$set(e.dataCache,"email",t)},expression:"dataCache.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("system.user.dialog.password"),error:Boolean(e.msg.errors.password)?e.msg.errors.password[0]:"",required:""}},[a("el-input",{attrs:{placeholder:e.$t("system.user.dialog.passwordPlaceholder.create")},model:{value:e.dataCache.password,callback:function(t){e.$set(e.dataCache,"password",t)},expression:"dataCache.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("action.save")))]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))])],1)],1)],1)])},staticRenderFns:[]}},A1Nz:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"",""])},DAVx:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"",""])},DnJg:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vue-simplebar",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-container"},[a("div",{staticClass:"page-filter-option"},[a("el-form",{staticClass:"d-flex flex-wrap",attrs:{inline:!0,model:e.filterOption}},[a("el-form-item",[a("el-input",{attrs:{placeholder:e.$t("system.user.email"),"prefix-icon":"el-icon-search",clearable:""},on:{change:e.filterChange},model:{value:e.filterOption.keyword,callback:function(t){e.$set(e.filterOption,"keyword",t)},expression:"filterOption.keyword"}})],1),e._v(" "),a("el-form-item",{staticClass:"el-form-item-small"},[a("el-select",{attrs:{placeholder:e.$t("system.user.deleted"),clearable:""},on:{change:e.filterChange},model:{value:e.filterOption.deleted,callback:function(t){e.$set(e.filterOption,"deleted",t)},expression:"filterOption.deleted"}},e._l(e.$t("form.deletedList"),function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:e.filterChange}},[e._v(e._s(e.$t("action.search")))])],1),e._v(" "),a("el-form-item",{staticClass:"ml-auto mr-0"},[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus"},on:{click:e.dialogItemCreate}},[e._v(e._s(e.$t("action.new")))])],1)],1)],1),e._v(" "),a("div",{staticClass:"page-container-inner-table flex-auto"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,"default-sort":{prop:e.filterOption.order_column,order:e.filterOption.order_key},"highlight-current-row":""},on:{"sort-change":e.filterOrderChange}},[a("el-table-column",{attrs:{"min-width":"80",label:"ID",prop:"id",sortable:"custom","sort-orders":["descending","ascending"]}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"150",label:e.$t("system.user.name"),prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"200",label:e.$t("system.user.email")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.$options.filters.hsFilterKeyword(t.row.email,e.filterOption.keyword))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"120",label:e.$t("system.user.roles")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isSuperAdmin?a("span",[a("el-tag",{attrs:{effect:"plain",size:"mini",type:"danger"}},[e._v("Super-Admin")])],1):e._e(),e._v(" "),e._l(t.row.tree_roles,function(t,s){return a("span",{staticClass:"mr-1"},[a("el-tag",{attrs:{effect:"plain",size:"mini",type:"warning"}},[e._v(e._s(t.name))])],1)}),e._v(" "),t.row.isSuperAdmin||t.row.tree_roles.length?e._e():a("span",[a("el-tag",{attrs:{effect:"plain",size:"mini",type:"info"}},[e._v("null")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"220",label:e.$t("system.user.updated"),prop:"updated",sortable:"custom","sort-orders":["descending","ascending"]},scopedSlots:e._u([{key:"default",fn:function(e){return[a("component-page-timestamp",{attrs:{timestamp:e.row.updated}})]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"100",label:e.$t("system.user.deleted"),prop:"deleted"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{effect:"plain",size:"mini",type:t.row.deleted?"danger":"info"}},[e._v("\n                            "+e._s(e.$t("form.deletedList")[Number(!!t.row.deleted)].label)+"\n                        ")]),e._v(" "),e.isSuperAdmin||!t.row.isSuperAdmin?a("span",{staticClass:"operation-options-icon"},[a("i",{staticClass:"el-icon-edit",on:{click:function(a){return e.dialogItemDeleted(t)}}})]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"100",label:e.$t("system.user.operation"),align:"right",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"operation-options-icon"},[a("i",{staticClass:"el-icon-view",on:{click:function(a){return e.drawerItemDetails(t)}}})]),e._v(" "),e.isSuperAdmin||!t.row.isSuperAdmin?a("span",{staticClass:"operation-options-icon"},[a("i",{staticClass:"el-icon-edit-outline",on:{click:function(a){return e.dialogItemUpdate(t)}}})]):e._e(),e._v(" "),e.isSuperAdmin||!t.row.isSuperAdmin?a("span",{staticClass:"operation-options-icon"},[a("i",{staticClass:"el-icon-delete",on:{click:function(a){return e.dialogItemDestroy(t)}}})]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"pt-4 text-right pb-4"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.filterOption.page,"page-size":e.filterOption.page_size,total:e.dataMeta.total},on:{"update:pageSize":function(t){return e.$set(e.filterOption,"page_size",t)},"update:page-size":function(t){return e.$set(e.filterOption,"page_size",t)},"size-change":e.filterChange,"current-change":e.filterPageChange}})],1)],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.$t("system.user.dialog.deleted"),center:"",width:"320px",visible:e.dialog.visible.deleted},on:{"update:visible":function(t){return e.$set(e.dialog.visible,"deleted",t)}}},[a("div",{staticClass:"text-center",domProps:{innerHTML:e._s(e.$t("confirm.user",{status:e.itemCache.deleted?e.$t("action.on"):e.$t("action.off")}))}}),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.deleted}},[e._v(e._s(e.$t("action.confirm")))]),e._v(" "),a("el-button",{on:{click:function(t){e.dialog.visible.deleted=!1}}},[e._v(e._s(e.$t("action.cancel")))])],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.$t("system.user.dialog.destroy"),center:"",width:"340px",visible:e.dialog.visible.destroy},on:{"update:visible":function(t){return e.$set(e.dialog.visible,"destroy",t)}}},[a("div",{staticClass:"text-center",domProps:{innerHTML:e._s(e.$t("confirm.user",{status:e.$t("action.delete")}))}}),e._v(" "),a("div",{staticClass:"text-center text-danger-custom"},[e._v(e._s(e.$t("confirm.delete")))]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.destroy}},[e._v(e._s(e.$t("action.confirm")))]),e._v(" "),a("el-button",{on:{click:function(t){e.dialog.visible.destroy=!1}}},[e._v(e._s(e.$t("action.cancel")))])],1)]),e._v(" "),a("item-create",{attrs:{visible:e.dialog.visible.create},on:{"update:visible":function(t){return e.$set(e.dialog.visible,"create",t)},create:e.filterChange}}),e._v(" "),a("item-update",{attrs:{visible:e.dialog.visible.update,data:e.itemCache},on:{"update:visible":function(t){return e.$set(e.dialog.visible,"update",t)},update:e.filterChange}}),e._v(" "),a("item-details",{attrs:{visible:e.drawer.visible.details,data:e.itemCache},on:{"update:visible":function(t){return e.$set(e.drawer.visible,"details",t)}}})],1)},staticRenderFns:[]}},M7TY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ItemUpdate",props:["visible","data"],data:function(){return{dialogVisible:!1,dataCache:{id:0,is_super_admin:0,name:"",email:"",password:""},msg:{code:200,message:"",errors:{}}}},computed:{isSuperAdmin:function(){return this.$store.state.admin.user.isSuperAdmin}},watch:{visible:function(e,t){e&&(this.initData(this.data),this.dialogVisible=e)}},methods:{initMsg:function(){this.msg.code=200,this.msg.message="",this.msg.errors={}},initData:function(e){this.initMsg(),this.dataCache.id=e.id,this.dataCache.is_super_admin=Number(e.isSuperAdmin),this.dataCache.name=e.name,this.dataCache.email=e.email,this.dataCache.password=""},onSubmit:function(){var e=this;this.initMsg();var t=this.$loading();axios.post("/system/user/saveItem",this.dataCache).then(function(a){t.close(),200==a.data.resp_msg.code?(e.$message({type:"success",message:e.$t("messages.succeeded",{status:e.$t("action.edit")}),showClose:!0}),e.dialogVisible=!1,e.$emit("update",a.data.resp_data)):_.includes([42e3,44202],a.data.resp_msg.code)?e.msg=a.data.resp_msg:e.$message({type:"error",message:e.$t("messages.failed",{status:e.$t("action.edit")}),showClose:!0})})}}}},Mo0U:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ItemCreate",props:["visible"],data:function(){return{dialogVisible:!1,dataCache:{is_super_admin:0,name:"",email:"",password:""},msg:{code:200,message:"",errors:{}}}},computed:{isSuperAdmin:function(){return this.$store.state.admin.user.isSuperAdmin}},watch:{visible:function(e,t){e&&(this.initData(),this.dialogVisible=e)}},methods:{initMsg:function(){this.msg.code=200,this.msg.message="",this.msg.errors={}},initData:function(){this.initMsg(),this.dataCache.is_super_admin=0,this.dataCache.name="",this.dataCache.email="",this.dataCache.password=""},onSubmit:function(){var e=this;this.initMsg();var t=this.$loading();axios.post("/system/user/saveItem",this.dataCache).then(function(a){t.close(),200==a.data.resp_msg.code?(e.$message({type:"success",message:e.$t("messages.succeeded",{status:e.$t("action.new")}),showClose:!0}),e.dialogVisible=!1,e.$emit("create")):_.includes([42e3,44202],a.data.resp_msg.code)?e.msg=a.data.resp_msg:e.$message({type:"error",message:e.$t("messages.failed",{status:e.$t("action.new")}),showClose:!0})})}}}},V1Fj:function(e,t,a){var s=a("VU/8")(a("fiWZ"),a("DnJg"),!1,function(e){a("8lj0")},null,null);e.exports=s.exports},a6i1:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-drawer",{attrs:{title:e.$t("system.user.drawer.details"),size:"400px",visible:e.drawerVisible},on:{"update:visible":function(t){e.drawerVisible=t},close:function(t){return e.$emit("update:visible",!1)}}},[a("vue-simplebar",[e.data.id?a("div",{staticClass:"pt-5 pb-5"},[a("el-form",{staticClass:"el-form-detail",attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"ID"}},[e._v(e._s(e.data.id))]),e._v(" "),a("el-form-item",{attrs:{label:e.$t("system.user.name")}},[e._v(e._s(e.data.name))]),e._v(" "),a("el-form-item",{attrs:{label:e.$t("system.user.email")}},[e._v(e._s(e.data.email))]),e._v(" "),a("el-form-item",{attrs:{label:e.$t("system.user.roles")}},[e.data.isSuperAdmin?a("span",[a("el-tag",{attrs:{effect:"plain",size:"mini",type:"danger"}},[e._v("Super-Admin")])],1):e._e(),e._v(" "),e._l(e.data.tree_roles,function(t,s){return a("span",{staticClass:"mr-1"},[a("el-tag",{attrs:{effect:"plain",size:"mini",type:"warning"}},[e._v(e._s(t.name))])],1)}),e._v(" "),e.data.isSuperAdmin||e.data.tree_roles.length?e._e():a("span",[a("el-tag",{attrs:{effect:"plain",size:"mini",type:"info"}},[e._v("null")])],1)],2),e._v(" "),a("el-form-item",{attrs:{label:e.$t("system.user.created")}},[a("component-page-timestamp",{attrs:{timestamp:e.data.created}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("system.user.updated")}},[a("component-page-timestamp",{attrs:{timestamp:e.data.updated}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("system.user.deleted")}},[a("el-tag",{attrs:{effect:"plain",size:"mini",type:e.data.deleted?"danger":"info"}},[e._v("\n                        "+e._s(e.$t("form.deletedList")[Number(!!e.data.deleted)].label)+"\n                    ")])],1)],1)],1):e._e()])],1)},staticRenderFns:[]}},aIaj:function(e,t,a){var s=a("DAVx");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("79da12dc",s,!0,{})},fe4X:function(e,t,a){var s=a("A1Nz");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("99fac35e",s,!0,{})},fiWZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("ljZd"),i=a.n(s),r=a("uz7R"),n=a.n(r),l=a("8ZSz"),o=a.n(l);t.default={components:{ItemCreate:i.a,ItemUpdate:n.a,ItemDetails:o.a},data:function(){return{loading:!1,filterOption:{deleted:"",keyword:"",page:1,page_size:10,order:"desc",order_key:"descending",order_column:"updated"},dataMeta:{total:0},dataList:[],itemCache:{},dialog:{visible:{create:!1,update:!1,deleted:!1,destroy:!1}},drawer:{visible:{details:!1}}}},computed:{isSuperAdmin:function(){return this.$store.state.admin.user.isSuperAdmin}},created:function(){this.filterChange()},methods:{clearFilterOption:function(){this.loading=!0,this.filterOption.page=1},filterChange:function(){this.clearFilterOption(),this.getDataList()},filterPageChange:function(e){this.loading=!0,this.filterOption.page=e,this.getDataList()},filterOrderChange:function(e){this.clearFilterOption(),this.filterOption.order="ascending"==e.order?"asc":"desc",this.filterOption.order_key=e.order,this.filterOption.order_column=e.prop,this.getDataList()},getDataList:function(){var e=this;axios.get("/system/user/getList",{params:this.filterOption}).then(function(t){200==t.data.resp_msg.code?(e.dataMeta=t.data.resp_data.meta,e.dataList=t.data.resp_data.data):e.$message({type:"error",message:t.data.resp_msg.message,showClose:!0}),e.loading=!1})},deleted:function(){var e=this;this.dialog.visible.deleted=!1;var t=this.$loading(),a=this.itemCache.deleted?"restore":"destroy";axios.post("/system/user/"+a,{id:this.itemCache.id}).then(function(a){t.close(),200==a.data.resp_msg.code?(e.$message({type:"success",message:e.$t("messages.succeeded",{status:e.itemCache.deleted?e.$t("action.on"):e.$t("action.off")}),showClose:!0}),e.filterChange()):e.$message({type:"error",message:e.$t("messages.failed",{status:e.itemCache.deleted?e.$t("action.on"):e.$t("action.off")}),showClose:!0})})},destroy:function(){var e=this;this.dialog.visible.destroy=!1;var t=this.$loading();axios.post("/system/user/forceDestroy",{id:this.itemCache.id}).then(function(a){t.close(),200==a.data.resp_msg.code?(e.$message({type:"success",message:e.$t("messages.succeeded",{status:e.$t("action.delete")}),showClose:!0}),e.filterChange()):e.$message({type:"error",message:e.$t("messages.failed",{status:e.$t("action.delete")}),showClose:!0})})},dialogItemCreate:function(){this.dialog.visible.create=!0},dialogItemUpdate:function(e){this.itemCache=e.row,this.dialog.visible.update=!0},dialogItemDeleted:function(e){this.itemCache=e.row,this.dialog.visible.deleted=!0},dialogItemDestroy:function(e){this.itemCache=e.row,this.dialog.visible.destroy=!0},drawerItemDetails:function(e){this.itemCache=e.row,this.drawer.visible.details=!0}}}},gybs:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ItemDetails",props:["visible","data"],data:function(){return{drawerVisible:!1}},watch:{visible:function(e,t){e&&(this.drawerVisible=e)}}}},htZS:function(e,t,a){var s=a("ih/8");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("72b491b4",s,!0,{})},"ih/8":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"",""])},ljZd:function(e,t,a){var s=a("VU/8")(a("Mo0U"),a("99n5"),!1,function(e){a("fe4X")},"data-v-0c2c8508",null);e.exports=s.exports},uz7R:function(e,t,a){var s=a("VU/8")(a("M7TY"),a("3+cZ"),!1,function(e){a("aIaj")},"data-v-fa5467c8",null);e.exports=s.exports},zGNM:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"",""])}});